"use strict";let formReady=callback=>{if(document.readyState!="loading")callback();else document.addEventListener("DOMContentLoaded",callback)};formReady(()=>{let playerElement=document.getElementById("player");let streamPaneElement=document.getElementById("streamPane");let unknownStreamElement=document.getElementById("unknownStream");let twitchStreamElement=document.getElementById("twitchStream");let howToElement=document.getElementById("howTo");let gamePaneElement=document.getElementById("gamePane");let gameFrameElement=document.getElementById("gameFrame");let streamURLBarElement=document.getElementById("streamURLBar");let streamURLElement=document.getElementById("streamURL");let menuItemsElement=document.getElementById("menuItems");let menuButtonElement=document.getElementById("menuButton");let swapViewButtonElements=document.querySelectorAll(".swapViewButton");let swapViewButtonWrapperElements=document.querySelectorAll(".swapViewButtonWrapper");let activeView="default";let documentTitle="Remote Jackbox Player";let playerURL=null;let streamURL="";let peekUITimeoutID;let twitchAuthToken="";let twitchGameIds;let twitchClientID="";let twitchChannelId="";const defaultStreamURL="";const defaultGameURL="https://jackbox.tv";const defaultPlayerClasses=playerElement.getAttribute("class");const defaultStreamPaneClasses=streamPaneElement.getAttribute("class");const defaultGamePaneClasses=gamePaneElement.getAttribute("class");const defaultSwapViewButtonWrappersClasses=swapViewButtonWrapperElements.item(0).getAttribute("class");function updateControls(){if(activeView=="swap"){swapViewButtonWrapperElements.forEach(e=>{e.classList.remove("lg:hidden");e.classList.remove("hidden")});document.getElementById("reloadStreamButton").classList.remove("lg:rounded-l");document.getElementById("reloadGameButton").classList.remove("lg:rounded-l");document.getElementById("reloadStreamButton").classList.remove("rounded-l");document.getElementById("reloadGameButton").classList.remove("rounded-l")}else{swapViewButtonWrapperElements.forEach(e=>{e.classList.remove("lg:hidden");e.classList.add("hidden")});document.getElementById("reloadStreamButton").classList.remove("lg:rounded-l");document.getElementById("reloadGameButton").classList.remove("lg:rounded-l");document.getElementById("reloadStreamButton").classList.add("rounded-l");document.getElementById("reloadGameButton").classList.add("rounded-l")}}function swapView(){if(streamPaneElement.classList.contains("z-10")){streamPaneElement.classList.add("z-20");streamPaneElement.classList.remove("z-10");gamePaneElement.classList.add("z-10");gamePaneElement.classList.remove("z-20")}else{gamePaneElement.classList.add("z-20");gamePaneElement.classList.remove("z-10");streamPaneElement.classList.add("z-10");streamPaneElement.classList.remove("z-20")}}function setView(view){function setupDefaultView(){activeView="default";playerElement.setAttribute("class",defaultPlayerClasses);streamPaneElement.setAttribute("class",defaultStreamPaneClasses);gamePaneElement.setAttribute("class",defaultGamePaneClasses);swapViewButtonWrapperElements.forEach(e=>{e.setAttribute("class",defaultSwapViewButtonWrappersClasses)})}function setupSplitView(){activeView="split";updateControls();playerElement.setAttribute("class","flex flex-row w-screen h-screen");streamPaneElement.setAttribute("class","relative w-1/2");gamePaneElement.setAttribute("class","relative w-1/2")}function setupSwapView(){activeView="swap";updateControls();playerElement.setAttribute("class","w-screen h-screen");if(streamPaneElement.classList.contains("z-10")){streamPaneElement.setAttribute("class","absolute z-10 w-full h-full");gamePaneElement.setAttribute("class","absolute z-20 w-full h-full")}else{streamPaneElement.setAttribute("class","absolute z-20 w-full h-full");gamePaneElement.setAttribute("class","absolute z-10 w-full h-full")}}function setupScrollView(){activeView="scroll";updateControls();playerElement.setAttribute("class","");streamPaneElement.setAttribute("class","relative w-full h-screen");gamePaneElement.setAttribute("class","relative w-full h-screen")}function setupSwipeView(){activeView="swipe";updateControls();playerElement.setAttribute("class","flex flex-no-wrap w-screen h-screen overflow-x-auto");streamPaneElement.setAttribute("class","relative flex-none w-full h-full");gamePaneElement.setAttribute("class","relative flex-none w-full h-full")}if(view==="default"){setupDefaultView()}else if(view==="split"){setupSplitView()}else if(view==="swap"){setupSwapView()}else if(view==="scroll"){setupScrollView()}else if(view==="swipe"){setupSwipeView()}localStorage.setItem("rjp-activeView",view)}const copyToClipboard=str=>{const el=document.createElement("textarea");el.value=str;el.setAttribute("readonly","");el.style.position="absolute";el.style.left="-9999px";document.body.appendChild(el);const selected=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):false;el.select();document.execCommand("copy");document.body.removeChild(el);if(selected){document.getSelection().removeAllRanges();document.getSelection().addRange(selected)}};function getURLParam(param){let parameter=param;parameter=parameter.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let regex=new RegExp("[\\?|&]"+parameter+"=([^&#]*)");let results=regex.exec("?"+playerURL.toString().split("?")[1]);return results===null?"":decodeURIComponent(results[1].replace(/\+/g,"%20"))}function getURLHashParam(query){let parameter=query;parameter=parameter.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let regex=new RegExp("[\\#|&]"+parameter+"=([^&#]*)");let results=regex.exec("#"+playerURL.toString().split("#")[1]);return results===null?"":decodeURIComponent(results[1].replace(/\+/g,"%20"))}function updatePlayer(){if(streamURLElement.value!==streamURL&&streamURLElement.value.toString().length>8){gameFrameElement.src="";gameFrameElement.src=defaultGameURL;streamURL=streamURLElement.value;if(streamURL!=""){document.title=`${documentTitle} - ${streamURL}`;playerURL.searchParams.set("streamURL",streamURLElement.value);window.history.pushState(null,null,"?streamURL="+encodeURIComponent(streamURL))}else{document.title=`${documentTitle}`;playerURL.searchParams.delete("streamURL");window.history.pushState(null,null,"/")}}else if(streamURLElement.value.toString().length<9){document.title=`${documentTitle}`;playerURL.searchParams.delete("streamURL");window.history.pushState(null,null,"/")}}function initializePlayer(){playerURL=new URL(document.location.href.toString());streamURL=getURLParam("streamURL");if(localStorage.getItem("rjp-twitchAuthToken")!==null){twitchAuthToken=localStorage.getItem("rjp-twitchAuthToken")}if(getURLHashParam("access_token")!==""){twitchAuthToken=getURLHashParam("access_token");localStorage.setItem("rjp-twitchAuthToken",twitchAuthToken);window.history.pushState(null,null,window.location.pathname+window.location.search)}if(getURLParam("error")!==""){if(getURLParam("error_description")==="The user denied you access"){alert("To find a random stream or use the followed streams list, please authorize Twitch access.");if(localStorage.getItem("rjp-afterAuthAction")==="random"){localStorage.removeItem("rjp-afterAuthAction")}}else{localStorage.removeItem("rjp-twitchAuthToken");redirectForTwitchAuthToken("stream")}}if(localStorage.getItem("rjp-afterAuthAction")!==null){if(localStorage.getItem("rjp-afterAuthAction")==="random"){document.getElementById("randomStreamButton").click()}else{streamURL=localStorage.getItem("rjp-afterAuthAction")}localStorage.removeItem("rjp-afterAuthAction")}if(streamURL!=""){streamURLElement.value=streamURL;document.title=`${documentTitle} - ${streamURL}`;updateStreamFrame();peekUI()}else{document.title=`${documentTitle}`;if(window.innerWidth<768){setUIState("open");setTimeout(()=>{setMenuElementState("close")},3000)}else{setUIState("open")}}}function showStreamFrameElement(type){function hideUnknownStream(){unknownStreamElement.classList.add("hidden");unknownStreamElement.src=""}function hideHowTo(){howToElement.classList.add("hidden")}function hideTwitchStream(){twitchStreamElement.classList.add("hidden");twitchStreamElement.innerHTML="";twitchChannelId=""}if(type=="twitch"){twitchStreamElement.classList.remove("hidden");hideHowTo();hideUnknownStream()}else if(type=="howTo"){howToElement.classList.remove("hidden");streamPaneElement.scrollIntoView(true);hideUnknownStream();hideTwitchStream();setStreamURLBarElementState("open")}else{unknownStreamElement.classList.remove("hidden");hideHowTo();hideTwitchStream()}}function clearChannelIds(){twitchChannelId="";unknownStreamElement.src=""}function updateStreamFrame(){if(streamURLElement.value!=""){if(!"https://".startsWith(streamURLElement.value.toString())){streamURLElement.value=streamURLElement.value.toString().replace(/http:\/\//g,"");streamURLElement.value=streamURLElement.value.toString().replace(/https:\/\//g,"");streamURLElement.value=`https://${streamURLElement.value.toString()}`}if(streamURLElement.value.toString().includes("remote-jackbox-player")){document.getElementById("howToButton").click()}else if(streamURLElement.value.toString().includes("twitch.tv")){if(twitchChannelId===""||twitchChannelId!==streamURLElement.value.toString().split("/")[3]){twitchChannelId=streamURLElement.value.toString().split("/")[3];showStreamFrameElement("twitch");let ttvConfig=()=>{try{var embed=new Twitch.Embed("twitchStream",{allowfullscreen:false,width:"100%",height:"100%",channel:twitchChannelId,theme:"dark",layout:"video-with-chat",autoplay:true});embed.addEventListener(Twitch.Embed.VIDEO_READY,()=>{var player=embed.getPlayer();player.play()})}catch(error){console.error("Twitch embed setup error: \n%o",error)}};if(document.getElementById("ttvEmbedScript")==null||document.getElementById("ttvEmbedScript")==undefined){let ttvEmbedScript=document.createElement("script");ttvEmbedScript.setAttribute("id","ttvEmbedScript");ttvEmbedScript.setAttribute("src","https://embed.twitch.tv/embed/v1.js");ttvEmbedScript.addEventListener("load",ttvConfig);document.body.appendChild(ttvEmbedScript)}else{twitchStreamElement.innerHTML="";ttvConfig()}}}else{showStreamFrameElement();if(unknownStreamElement.src!==streamURLElement.value){unknownStreamElement.src=streamURLElement.value}}}else{document.getElementById("howToButton").click()}}function setStreamURLBarElementState(state){if(state=="open"){setOpacityStreamURLBar("1.0");streamURLBarElement.classList.add("w-full");streamURLBarElement.classList.remove("w-0");setTimeout(()=>{document.querySelectorAll("#streamURLBarTitleHelpText > .titleHelpText").forEach(e=>{e.classList.add("opacity-100");e.classList.remove("opacity-0")})},1000)}else if(state=="close"){streamURLElement.blur();document.querySelectorAll("#streamURLBarTitleHelpText > .titleHelpText").forEach(e=>{e.classList.add("opacity-0");e.classList.remove("opacity-100")});setTimeout(()=>{streamURLBarElement.classList.add("w-0");streamURLBarElement.classList.remove("w-full")},500)}}function setMenuElementState(state){const closedMenuIcon=`<i class="fas fa-times" aria-hidden="true"></i>`;const menuIcon=`<i class="fas fa-bars" aria-hidden="true"></i>`;if(state=="open"){menuButtonElement.innerHTML=closedMenuIcon;menuItemsElement.classList.remove("h-0");menuItemsElement.style.height=menuItemsElement.childElementCount*2.5+"rem";menuButtonElement.title="Close menu";menuButtonElement.classList.remove("bg-white");menuButtonElement.classList.remove("rounded-r");menuButtonElement.classList.add("rounded-br");menuButtonElement.classList.add("bg-teal-300");menuButtonElement.classList.add("shadow-inner");setTimeout(()=>{document.querySelectorAll(".menuItem > .titleHelpText").forEach(e=>{e.classList.add("opacity-100");e.classList.remove("opacity-0")});document.querySelectorAll(".control > .titleHelpText").forEach(e=>{e.classList.add("opacity-100");e.classList.remove("opacity-0")})},500)}else if(state=="close"){document.querySelectorAll(".menuItem > .titleHelpText").forEach(e=>{e.classList.add("opacity-0");e.classList.remove("opacity-100")});document.querySelectorAll(".control > .titleHelpText").forEach(e=>{e.classList.add("opacity-0");e.classList.remove("opacity-100")});setTimeout(()=>{menuButtonElement.innerHTML=menuIcon;menuItemsElement.classList.remove("h-0");menuItemsElement.style.height="0rem";menuButtonElement.title="Open menu";menuButtonElement.classList.remove("bg-teal-300");menuButtonElement.classList.remove("shadow-inner");menuButtonElement.classList.remove("rounded-br");menuButtonElement.classList.add("bg-white");menuButtonElement.classList.add("rounded-r")},500)}}function setUIState(state){setStreamURLBarElementState(state);setMenuElementState(state)}function peekUI(){setUIState("open");peekUITimeoutID=setTimeout(()=>{setUIState("close")},3000)}function stopPeekUI(){if(peekUITimeoutID!=undefined){clearTimeout(peekUITimeoutID);peekUITimeoutID=undefined}}function setOpacityStreamURLBar(amount){streamURLBarElement.style.opacity=amount}document.getElementById("setupSplitViewButton").addEventListener("click",()=>{setView("split")});swapViewButtonElements.forEach(e=>{e.addEventListener("click",()=>{if(activeView!="swap"){setView("swap")}swapView()})});document.getElementById("setupSwapViewButton").addEventListener("click",()=>{if(activeView=="swap"){swapView()}else{setView("swap")}});document.getElementById("setupScrollViewButton").addEventListener("click",()=>{setView("scroll")});document.getElementById("setupSwipeViewButton").addEventListener("click",()=>{setView("swipe")});streamURLElement.addEventListener("input",()=>{updateStreamFrame();updatePlayer();setOpacityStreamURLBar("1.0")});streamURLElement.addEventListener("focus",()=>{stopPeekUI();updateStreamFrame();updatePlayer();setOpacityStreamURLBar("1.0");generateFollowedStreamsList();document.getElementById("followedStreamsListWrapper").classList.remove("scale-y-0");if(window.innerWidth<768||window.innerHeight<768){document.getElementById("menu").classList.remove("mb-24");document.getElementById("menu").classList.add("mb-6")}});streamURLElement.addEventListener("blur",()=>{updateStreamFrame();updatePlayer();document.getElementById("followedStreamsListWrapper").classList.add("scale-y-0");if(window.innerWidth<768||window.innerHeight<768){document.getElementById("menu").classList.remove("mb-6");document.getElementById("menu").classList.add("mb-24")}});document.getElementById("streamURLForm").addEventListener("submit",function(e){updateStreamFrame();updatePlayer();setUIState("close");e.preventDefault()});window.addEventListener("resize",()=>{});window.addEventListener("popstate",()=>{initializePlayer();updateStreamFrame()});document.getElementById("shareButton").addEventListener("click",()=>{stopPeekUI();copyToClipboard(playerURL.toString().replace(playerURL.hash,""));document.getElementById("shareText").classList.add("px-1");document.getElementById("shareText").classList.add("w-40");document.getElementById("shareButton").classList.remove("rounded-r");document.getElementById("shareTextDoppelganger").classList.add("px-1");document.getElementById("shareTextDoppelganger").classList.add("w-40");setTimeout(()=>{document.getElementById("shareText").classList.remove("px-1");document.getElementById("shareText").classList.remove("w-40");document.getElementById("shareButton").classList.add("rounded-r");document.getElementById("shareTextDoppelganger").classList.remove("px-1");document.getElementById("shareTextDoppelganger").classList.remove("w-40");setUIState("close")},3000)});document.getElementById("howToButton").addEventListener("click",()=>{if(Array.from(howToElement.classList).includes("hidden")){setMenuElementState("close");showStreamFrameElement("howTo")}else{updateStreamFrame();updatePlayer()}});function confirmUnload(e){e.preventDefault();e.returnValue=""}window.addEventListener("beforeunload",confirmUnload);document.getElementById("reloadStreamButton").addEventListener("click",()=>{clearChannelIds();updateStreamFrame()});document.getElementById("reloadGameButton").addEventListener("click",()=>{let result=false;result=window.confirm("Reload the game?\nYou may lose your spot in the lobby.");if(result===true){gameFrameElement.src="";gameFrameElement.src=defaultGameURL}});menuButtonElement.addEventListener("click",()=>{if(menuButtonElement.title.includes("Open")){setUIState("open");setTimeout(()=>{streamURLElement.focus()},1000)}else if(menuButtonElement.title.includes("Close")){setUIState("close");streamURLElement.blur()}});document.getElementById("hideStreamURLBarButton").addEventListener("click",()=>{setStreamURLBarElementState("close")});document.querySelectorAll(".menuItem").forEach(e=>{e.addEventListener("mouseover",()=>{stopPeekUI()})});document.querySelectorAll(".control").forEach(e=>{e.addEventListener("mouseover",()=>{stopPeekUI()})});streamURLBarElement.addEventListener("mouseover",()=>{stopPeekUI();setOpacityStreamURLBar("1.0")});streamURLBarElement.addEventListener("mouseout",()=>{if(streamURLElement.value!=""){setOpacityStreamURLBar("0.5")}});async function getTwitchGameIds(){let gameIdsFile=await fetch("feature-random-stream-game-ids.json");if(gameIdsFile.ok){gameIdsFileJSON=await gameIdsFile.json();twitchGameIds=Array.from(gameIdsFileJSON.twitch)}else{console.error("HTTP-Error:"+gameIdsFile.status);alert("Hmm...couldn't retrieve game list. Please try again.");window.removeEventListener("beforeunload",confirmUnload);location.reload()}}function redirectForTwitchAuthToken(action){if(action==="random"){localStorage.setItem("rjp-afterAuthAction","random")}else if(action==="stream"){localStorage.setItem("rjp-afterAuthAction",streamURL)}window.removeEventListener("beforeunload",confirmUnload);document.location.href=`https://id.twitch.tv/oauth2/authorize?client_id=${twitchClientID}&redirect_uri=${window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5500/":window.location.origin+window.location.pathname}&response_type=token`}document.getElementById("randomStreamButton").addEventListener("click",async()=>{function getRandomInt(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min))+min}streamURLElement.disabled=true;streamURLElement.value="Searching...";if(twitchGameIds===undefined){await getTwitchGameIds()}if(twitchAuthToken!==""&&twitchGameIds!==undefined){let streamPool=[];let currentGameIDPool=[];let twitchCursor="";for(let i=0;i<twitchGameIds.length;){let twitchResult=await fetch(`https://api.twitch.tv/helix/streams?language=en&first=30&game_id=${twitchGameIds[i].game_id}&after=${twitchCursor}`,{headers:{"Client-ID":twitchClientID,Authorization:`Bearer ${twitchAuthToken}`}});if(twitchResult.ok){let resultJSON=await twitchResult.json();for(let j=0;j<resultJSON.data.length;j++){if(resultJSON.data[j].viewer_count<8){currentGameIDPool.push(resultJSON.data[j])}}if(currentGameIDPool.length<30&&resultJSON.pagination.cursor!=undefined){twitchCursor=resultJSON.pagination.cursor}else{twitchCursor="";currentGameIDPool.forEach(s=>streamPool.push(s));currentGameIDPool=[];i++}}else{console.error("HTTP-Error:"+twitchResult.status);if(twitchResult.status===401){return redirectForTwitchAuthToken("random")}}}let randomStreamIndex=getRandomInt(0,streamPool.length);streamURLElement.value=`https://twitch.tv/${streamPool[randomStreamIndex].user_name}`;streamURLElement.disabled=false;updateStreamFrame();updatePlayer()}else if(twitchAuthToken===""){redirectForTwitchAuthToken("random")}});async function generateFollowedStreamsList(){let followedStreamsListElement=document.getElementById("followedStreamsList");let followedStreamsListStatusElement=document.getElementById("followedStreamsListStatus");if(twitchGameIds===undefined){await getTwitchGameIds()}if(twitchAuthToken!==""&&twitchGameIds!==undefined){followedStreamsListStatusElement.classList.remove("hidden");if(followedStreamsListElement.innerHTML===""){followedStreamsListStatusElement.innerHTML=`Generating list...`}else{followedStreamsListStatusElement.innerHTML=`Updating list...`}let usersResult=await fetch(`https://api.twitch.tv/helix/users`,{headers:{"Client-ID":twitchClientID,Authorization:`Bearer ${twitchAuthToken}`}});if(usersResult.ok){let userObject=await usersResult.json();let followedStreamsPlayingJG=[];let twitchCursor="";do{let currentPageOfFollowedStreams=await fetch(`https://api.twitch.tv/helix/users/follows?from_id=${userObject.data[0].id}&first=30&after=${twitchCursor}`,{headers:{"Client-ID":twitchClientID,Authorization:`Bearer ${twitchAuthToken}`}});let currentPageOfFollowedStreamsJSON=await currentPageOfFollowedStreams.json();let userIdParamString="";if(currentPageOfFollowedStreamsJSON.data.length>0){for(let u=0;u<currentPageOfFollowedStreamsJSON.data.length;u++){userIdParamString+="user_id=";userIdParamString+=currentPageOfFollowedStreamsJSON.data[u].to_id;if(u+1<currentPageOfFollowedStreamsJSON.data.length){userIdParamString+="&"}}let streamInfo=await fetch(`https://api.twitch.tv/helix/streams?${userIdParamString}`,{headers:{"Client-ID":twitchClientID,Authorization:`Bearer ${twitchAuthToken}`}});userIdParamString="";for(let u=0;u<currentPageOfFollowedStreamsJSON.data.length;u++){userIdParamString+="id=";userIdParamString+=currentPageOfFollowedStreamsJSON.data[u].to_id;if(u+1<currentPageOfFollowedStreamsJSON.data.length){userIdParamString+="&"}}let userInfo=await fetch(`https://api.twitch.tv/helix/users?${userIdParamString}`,{headers:{"Client-ID":twitchClientID,Authorization:`Bearer ${twitchAuthToken}`}});if(streamInfo.ok&&userInfo.ok){let streamInfoJSON=await streamInfo.json();let userInfoJSON=await userInfo.json();for(let s=0;s<streamInfoJSON.data.length;s++){for(let g=0;g<twitchGameIds.length;g++){if(twitchGameIds[g].game_id===streamInfoJSON.data[s].game_id){let tempObject=streamInfoJSON.data[s];for(let p=0;p<userInfoJSON.data.length;p++){if(userInfoJSON.data[p].id===streamInfoJSON.data[s].user_id)tempObject.profile_image_url=userInfoJSON.data[p].profile_image_url}followedStreamsPlayingJG.push(tempObject)}}}}}if(currentPageOfFollowedStreamsJSON.pagination.cursor!==undefined){twitchCursor=currentPageOfFollowedStreamsJSON.pagination.cursor}else{twitchCursor=""}}while(twitchCursor!=="");if(followedStreamsPlayingJG.length>0){if(followedStreamsPlayingJG.length>1){}followedStreamsListElement.innerHTML="";followedStreamsPlayingJG.forEach(s=>{let gameName="";for(let g=0;g<twitchGameIds.length;g++){if(twitchGameIds[g].game_id===s.game_id){gameName=twitchGameIds[g].game_name}}followedStreamsListElement.innerHTML+=`
							<div 
								class="followedStream flex flex-row flex-no-wrap p-2 text-center align-middle cursor-pointer border-b border-solid border-gray-400 hover:bg-teal-100" 
								title="${s.user_name+" playing "+gameName+" for "+(s.viewer_count===1?s.viewer_count+" viewer":s.viewer_count===0?"no one.":s.viewer_count.toLocaleString()+" viewers.")}" 
								data-stream-name="${s.user_name}"
							>
								<div class="flex-initial w-4/12 text-left truncate">
									<img src="${s.profile_image_url}" class="inline w-6 rounded">
									<span class="font-bold">${s.user_name}</span>
								</div>
								<div class="flex-grow text-left truncate">
									<span class="underline">${gameName}</span>
								</div>
								<div class="flex-initial w-3/12 text-right">
									${s.viewer_count===1?s.viewer_count+" viewer":s.viewer_count===0?"No viewers":s.viewer_count.toLocaleString()+" viewers"}
								</div>
							</div>
						`});document.querySelectorAll(".followedStream").forEach(e=>{e.addEventListener("click",()=>{streamURLElement.value=`https://twitch.tv/${e.getAttribute("data-stream-name")}`;updateStreamFrame();updatePlayer()})})}else{followedStreamsListElement.innerHTML=`
						<div class="p-2 text-center">
							Sorry, none of your followed streams are playing a Jackbox game.
						</div>
					`}}else{followedStreamsListElement.innerHTML=`
					<div class="p-2 text-center">
						Want to see which of your followed Twitch streams are playing Jackbox
						games?<br />
						<button
							id="authorizeTwitchAccessButton"
							class="bg-purple-500 text-white rounded mt-1 px-4 py-1 hover:bg-purple-600"
						>
							Authorize <i class="fab fa-twitch"></i> access
						</button>
					</div>
				`}followedStreamsListStatusElement.classList.add("hidden")}else{followedStreamsListElement.innerHTML=`
				<div class="p-2 text-center">
					Want to see which of your followed Twitch streams are playing Jackbox
					games?<br />
					<button
						id="authorizeTwitchAccessButton"
						class="bg-purple-500 text-white rounded mt-1 px-4 py-1 hover:bg-purple-600"
					>
						Authorize <i class="fab fa-twitch"></i> access
					</button>
				</div>
			`;document.getElementById("authorizeTwitchAccessButton").addEventListener("click",()=>{redirectForTwitchAuthToken("stream")})}}document.getElementById("showStreamURLBarButton").addEventListener("click",()=>{if(streamURLBarElement.classList.toString().includes("w-full")){streamURLElement.focus()}else{setStreamURLBarElementState("open");setTimeout(()=>{streamURLElement.focus()},1000)}});async function retrieveClientIds(){let retrieveClientIds=await fetch("client-ids.json");if(retrieveClientIds.ok){let retrieveClientIdsJSON=await retrieveClientIds.json();twitchClientID=retrieveClientIdsJSON["twitch-client-id"]}else{console.error("Unable to get client ids. The application will not operate as intended. Please reload the page to try again.")}}if(localStorage.getItem("rjp-activeView")!==null){setView(localStorage.getItem("rjp-activeView"))}else{localStorage.setItem("rjp-activeView",activeView)}retrieveClientIds();initializePlayer()});
//# sourceMappingURL=script.js.map