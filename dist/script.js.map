{"version":3,"file":"script.js","names":["formReady","callback","document","readyState","addEventListener","playerElement","getElementById","streamPaneElement","unknownStreamElement","twitchStreamElement","howToElement","gamePaneElement","gameFrameElement","streamURLBarElement","streamURLElement","menuItemsElement","menuButtonElement","swapViewButtonElements","querySelectorAll","swapViewButtonWrapperElements","activeView","documentTitle","playerURL","streamURL","peekUITimeoutID","twitchAuthToken","twitchGameIds","twitchClientID","twitchChannelId","defaultStreamURL","defaultGameURL","defaultPlayerClasses","getAttribute","defaultStreamPaneClasses","defaultGamePaneClasses","defaultSwapViewButtonWrappersClasses","item","updateControls","forEach","e","classList","remove","add","swapView","contains","setView","view","setupDefaultView","setAttribute","setupSplitView","setupSwapView","setupScrollView","setupSwipeView","localStorage","setItem","copyToClipboard","str","el","createElement","value","style","position","left","body","appendChild","selected","getSelection","rangeCount","getRangeAt","select","execCommand","removeChild","removeAllRanges","addRange","getURLParam","param","parameter","replace","regex","RegExp","results","exec","toString","split","decodeURIComponent","getURLHashParam","query","updatePlayer","length","src","title","searchParams","set","window","history","pushState","encodeURIComponent","delete","initializePlayer","URL","location","href","getItem","pathname","search","alert","removeItem","redirectForTwitchAuthToken","click","updateStreamFrame","peekUI","innerWidth","setUIState","setTimeout","setMenuElementState","showStreamFrameElement","type","hideUnknownStream","hideHowTo","hideTwitchStream","innerHTML","scrollIntoView","setStreamURLBarElementState","clearChannelIds","startsWith","includes","ttvConfig","embed","Twitch","Embed","allowfullscreen","width","height","channel","theme","layout","autoplay","VIDEO_READY","player","getPlayer","play","error","console","undefined","ttvEmbedScript","state","setOpacityStreamURLBar","blur","closedMenuIcon","menuIcon","childElementCount","stopPeekUI","clearTimeout","amount","opacity","generateFollowedStreamsList","innerHeight","preventDefault","hash","Array","from","confirmUnload","returnValue","result","confirm","focus","getTwitchGameIds","gameIdsFile","fetch","ok","gameIdsFileJSON","json","twitch","status","removeEventListener","reload","action","hostname","origin","getRandomInt","min","max","Math","ceil","floor","random","disabled","streamPool","currentGameIDPool","twitchCursor","i","twitchResult","game_id","headers","Authorization","resultJSON","j","data","viewer_count","push","pagination","cursor","s","randomStreamIndex","user_name","followedStreamsListElement","followedStreamsListStatusElement","usersResult","userObject","followedStreamsPlayingJG","currentPageOfFollowedStreams","id","currentPageOfFollowedStreamsJSON","userIdParamString","u","to_id","streamInfo","userInfo","streamInfoJSON","userInfoJSON","g","tempObject","p","user_id","profile_image_url","gameName","game_name","toLocaleString","retrieveClientIds","retrieveClientIdsJSON"],"sources":["../src/script.js"],"sourcesContent":["// Check if DOM is ready\nlet formReady = (callback) => {\n\tif (document.readyState != \"loading\") callback();\n\telse document.addEventListener(\"DOMContentLoaded\", callback);\n};\n\n// Execute form code when DOM is ready\nformReady(() => {\n\t// Element variables\n\tlet playerElement = document.getElementById(\"player\"); // Main container\n\tlet streamPaneElement = document.getElementById(\"streamPane\"); // Stream pane for all stream related elements\n\tlet unknownStreamElement = document.getElementById(\"unknownStream\"); // Unknown stream iframe\n\tlet twitchStreamElement = document.getElementById(\"twitchStream\"); // Twitch stream div\n\tlet howToElement = document.getElementById(\"howTo\"); // How-To div\n\tlet gamePaneElement = document.getElementById(\"gamePane\"); // Game pane for all game related elements\n\tlet gameFrameElement = document.getElementById(\"gameFrame\"); // Game iframe\n\tlet streamURLBarElement = document.getElementById(\"streamURLBar\"); // Stream url input\n\tlet streamURLElement = document.getElementById(\"streamURL\"); // Stream url input\n\tlet menuItemsElement = document.getElementById(\"menuItems\"); // Menu div\n\tlet menuButtonElement = document.getElementById(\"menuButton\"); // Menu button\n\tlet swapViewButtonElements = document.querySelectorAll(\".swapViewButton\"); // Swap view buttons\n\tlet swapViewButtonWrapperElements = document.querySelectorAll(\".swapViewButtonWrapper\"); // Swap view button wrappers\n\n\t// Data variables\n\tlet activeView = \"default\"; // Variable for active view\n\tlet documentTitle = \"Remote Jackbox Player\"; // Variable holding the official app title\n\tlet playerURL = null; // Variable for the player URL used for link sharing\n\tlet streamURL = \"\"; // Variable to hold the stream URL value\n\tlet peekUITimeoutID; // Variable to hold the timeout used in peekUI()\n\tlet twitchAuthToken = \"\"; // Variable to hold Twitch auth token\n\tlet twitchGameIds; // Variable for array of Twitch game ids\n\n\tlet twitchClientID = \"\"; // Variable for Twitch Client ID\n\n\t// Channel id/names\n\tlet twitchChannelId = \"\"; // Variable to hold Twitch channel id\n\n\tconst defaultStreamURL = \"\"; // Default stream URL\n\tconst defaultGameURL = \"https://jackbox.tv\"; // Default game URL\n\tconst defaultPlayerClasses = playerElement.getAttribute(\"class\"); // Default classes for #player from index.html\n\tconst defaultStreamPaneClasses = streamPaneElement.getAttribute(\"class\"); // Default classes for #streamPane from index.html\n\tconst defaultGamePaneClasses = gamePaneElement.getAttribute(\"class\"); // Default classes for #gamePane from index.html\n\tconst defaultSwapViewButtonWrappersClasses = swapViewButtonWrapperElements.item(0).getAttribute(\"class\"); // Default classes for .swapViewButton's from index.html\n\n\t// Function for updating visible controls based on active view\n\tfunction updateControls() {\n\t\t// If active view is swap\n\t\tif (activeView == \"swap\") {\n\t\t\t// For each swapViewButton that is hidden on large displays\n\t\t\tswapViewButtonWrapperElements.forEach((e) => {\n\t\t\t\t// Show that control\n\t\t\t\te.classList.remove(\"lg:hidden\");\n\t\t\t\te.classList.remove(\"hidden\");\n\t\t\t});\n\n\t\t\t// Update rounding style on reload buttons since swap button is present\n\t\t\tdocument.getElementById(\"reloadStreamButton\").classList.remove(\"lg:rounded-l\");\n\t\t\tdocument.getElementById(\"reloadGameButton\").classList.remove(\"lg:rounded-l\");\n\t\t\tdocument.getElementById(\"reloadStreamButton\").classList.remove(\"rounded-l\");\n\t\t\tdocument.getElementById(\"reloadGameButton\").classList.remove(\"rounded-l\");\n\t\t}\n\t\t// Not swap view\n\t\telse {\n\t\t\t// For each swapViewButton that is hidden on large displays\n\t\t\tswapViewButtonWrapperElements.forEach((e) => {\n\t\t\t\t// Hide that control\n\t\t\t\te.classList.remove(\"lg:hidden\");\n\t\t\t\te.classList.add(\"hidden\");\n\t\t\t});\n\n\t\t\t// Update rounding style on reload buttons since swap button is absent\n\t\t\tdocument.getElementById(\"reloadStreamButton\").classList.remove(\"lg:rounded-l\");\n\t\t\tdocument.getElementById(\"reloadGameButton\").classList.remove(\"lg:rounded-l\");\n\t\t\tdocument.getElementById(\"reloadStreamButton\").classList.add(\"rounded-l\");\n\t\t\tdocument.getElementById(\"reloadGameButton\").classList.add(\"rounded-l\");\n\t\t}\n\t}\n\n\t// Function for swapping which frame is in front\n\tfunction swapView() {\n\t\t// If the stream pane is hidden\n\t\tif (streamPaneElement.classList.contains(\"z-10\")) {\n\t\t\t// Show stream pane\n\t\t\tstreamPaneElement.classList.add(\"z-20\");\n\t\t\tstreamPaneElement.classList.remove(\"z-10\");\n\n\t\t\t// Hide game pane\n\t\t\tgamePaneElement.classList.add(\"z-10\");\n\t\t\tgamePaneElement.classList.remove(\"z-20\");\n\t\t}\n\t\t// Else assume game pane is hidden\n\t\telse {\n\t\t\t// Show game pane\n\t\t\tgamePaneElement.classList.add(\"z-20\");\n\t\t\tgamePaneElement.classList.remove(\"z-10\");\n\n\t\t\t// Hide stream pane\n\t\t\tstreamPaneElement.classList.add(\"z-10\");\n\t\t\tstreamPaneElement.classList.remove(\"z-20\");\n\t\t}\n\t}\n\n\t// Function for setting the view\n\tfunction setView(view) {\n\t\t// Function for setting up default view\n\t\tfunction setupDefaultView() {\n\t\t\tactiveView = \"default\"; // Set active view variable\n\t\t\tplayerElement.setAttribute(\"class\", defaultPlayerClasses); // Revert to default player configuration\n\t\t\tstreamPaneElement.setAttribute(\"class\", defaultStreamPaneClasses); // Revert to default stream pane configuration\n\t\t\tgamePaneElement.setAttribute(\"class\", defaultGamePaneClasses); // Revert to default game pane configuration\n\n\t\t\t// For each swap view button\n\t\t\tswapViewButtonWrapperElements.forEach((e) => {\n\t\t\t\t// Revert swap view button configurations\n\t\t\t\te.setAttribute(\"class\", defaultSwapViewButtonWrappersClasses);\n\t\t\t});\n\t\t}\n\n\t\t// Function for setting up split view\n\t\tfunction setupSplitView() {\n\t\t\tactiveView = \"split\"; // Set active view variable\n\t\t\tupdateControls(); // Hide controls\n\t\t\tplayerElement.setAttribute(\"class\", \"flex flex-row w-screen h-screen\"); // Configure player to fill the screen with flex rows\n\t\t\tstreamPaneElement.setAttribute(\"class\", \"relative w-1/2\"); // Configure stream pane to take 50% of the screen\n\t\t\tgamePaneElement.setAttribute(\"class\", \"relative w-1/2\"); // Configure game pane to take 50% of the screen\n\t\t}\n\n\t\t// Function for setting up swap view\n\t\tfunction setupSwapView() {\n\t\t\tactiveView = \"swap\"; // Set active view variable\n\t\t\tupdateControls(); // Show controls\n\t\t\tplayerElement.setAttribute(\"class\", \"w-screen h-screen\"); // Configure player to fill the screen\n\n\t\t\t// If the stream pane is hidden\n\t\t\tif (streamPaneElement.classList.contains(\"z-10\")) {\n\t\t\t\tstreamPaneElement.setAttribute(\"class\", \"absolute z-10 w-full h-full\"); // Configure the stream pane to fill the screen and keep it hidden\n\t\t\t\tgamePaneElement.setAttribute(\"class\", \"absolute z-20 w-full h-full\"); // Configure the game pane to fill the screen\n\t\t\t}\n\t\t\t// Else hide the game pane\n\t\t\telse {\n\t\t\t\tstreamPaneElement.setAttribute(\"class\", \"absolute z-20 w-full h-full\"); // Configure the stream pane to fill the screen\n\t\t\t\tgamePaneElement.setAttribute(\"class\", \"absolute z-10 w-full h-full\"); // Configure the game pane to fill the screen and hide it\n\t\t\t}\n\t\t}\n\n\t\t// Function for setting up scroll view\n\t\tfunction setupScrollView() {\n\t\t\tactiveView = \"scroll\"; // Set active view variable\n\t\t\tupdateControls(); // Hide controls\n\t\t\tplayerElement.setAttribute(\"class\", \"\"); // Configure player to be static\n\t\t\tstreamPaneElement.setAttribute(\"class\", \"relative w-full h-screen\"); // Configure stream pane to fill the screen\n\t\t\tgamePaneElement.setAttribute(\"class\", \"relative w-full h-screen\"); // Configure game pane to fill the screen\n\t\t}\n\n\t\t// Function for setting up swipe view\n\t\tfunction setupSwipeView() {\n\t\t\tactiveView = \"swipe\"; // Set active view variable\n\t\t\tupdateControls(); // Hide controls\n\t\t\tplayerElement.setAttribute(\"class\", \"flex flex-no-wrap w-screen h-screen overflow-x-auto\"); // Configure player to fill the screen with flex no wrapping and scrolling on the x axis\n\t\t\tstreamPaneElement.setAttribute(\"class\", \"relative flex-none w-full h-full\"); // Configure the stream pane to fill a screen's worth of content without wrapping\n\t\t\tgamePaneElement.setAttribute(\"class\", \"relative flex-none w-full h-full\"); // Configure the game pane to fill a screen's worth of content without wrapping\n\t\t}\n\n\t\t// If default view is requested\n\t\tif (view === \"default\") {\n\t\t\tsetupDefaultView(); // Set default view\n\t\t}\n\t\t// Else if split view is requested\n\t\telse if (view === \"split\") {\n\t\t\tsetupSplitView(); // Set split view\n\t\t}\n\t\t// Else if swap view is requested\n\t\telse if (view === \"swap\") {\n\t\t\tsetupSwapView(); // Set swap view\n\t\t}\n\t\t// Else if scroll view is requested\n\t\telse if (view === \"scroll\") {\n\t\t\tsetupScrollView(); // Set scroll view\n\t\t}\n\t\t// Else if swipe view is requested\n\t\telse if (view === \"swipe\") {\n\t\t\tsetupSwipeView(); // Set swipe view\n\t\t}\n\n\t\t// Save view preference\n\t\tlocalStorage.setItem(\"rjp-activeView\", view);\n\t}\n\n\t// Function for copying a string to clipboard\n\tconst copyToClipboard = (str) => {\n\t\tconst el = document.createElement(\"textarea\"); // Create a <textarea> element\n\t\tel.value = str; // Set its value to the string that you want copied\n\t\tel.setAttribute(\"readonly\", \"\"); // Make it readonly to be tamper-proof\n\t\tel.style.position = \"absolute\";\n\t\tel.style.left = \"-9999px\"; // Move outside the screen to make it invisible\n\t\tdocument.body.appendChild(el); // Append the <textarea> element to the HTML document\n\t\tconst selected =\n\t\t\tdocument.getSelection().rangeCount > 0 // Check if there is any content selected previously\n\t\t\t\t? document.getSelection().getRangeAt(0) // Store selection if found\n\t\t\t\t: false; // Mark as false to know no selection existed before\n\t\tel.select(); // Select the <textarea> content\n\t\tdocument.execCommand(\"copy\"); // Copy - only works as a result of a user action (e.g. click events)\n\t\tdocument.body.removeChild(el); // Remove the <textarea> element\n\t\tif (selected) {\n\t\t\t// If a selection existed before copying\n\t\t\tdocument.getSelection().removeAllRanges(); // Unselect everything on the HTML document\n\t\t\tdocument.getSelection().addRange(selected); // Restore the original selection\n\t\t}\n\t};\n\n\t// Function for getting a player URL param\n\t// Based on: https://blog.bitscry.com/2018/08/17/getting-and-setting-url-parameters-with-javascript/\n\tfunction getURLParam(param) {\n\t\tlet parameter = param;\n\t\tparameter = parameter.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n\t\tlet regex = new RegExp(\"[\\\\?|&]\" + parameter + \"=([^&#]*)\");\n\t\tlet results = regex.exec(\"?\" + playerURL.toString().split(\"?\")[1]);\n\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \"%20\"));\n\t}\n\n\t// Function for pulling hash parameters from the URL\n\tfunction getURLHashParam(query) {\n\t\tlet parameter = query;\n\t\tparameter = parameter.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n\t\tlet regex = new RegExp(\"[\\\\#|&]\" + parameter + \"=([^&#]*)\");\n\t\tlet results = regex.exec(\"#\" + playerURL.toString().split(\"#\")[1]);\n\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \"%20\"));\n\t}\n\n\t// Function for updating the player's state based on new user input. Always call after calling updateStreamFrame()\n\tfunction updatePlayer() {\n\t\t// If the stream URL input is different than the last saved one and is not just \"https://\" (which is 8 chars long)\n\t\tif (streamURLElement.value !== streamURL && streamURLElement.value.toString().length > 8) {\n\t\t\t// Reload gameFrame frame\n\t\t\tgameFrameElement.src = \"\"; // Clear src of gameFrame frame\n\t\t\tgameFrameElement.src = defaultGameURL; // Set src back to default game URL\n\n\t\t\t// Update the streamURL variable with the entered stream URL\n\t\t\tstreamURL = streamURLElement.value;\n\n\t\t\t// If there is a stream URL entered\n\t\t\tif (streamURL != \"\") {\n\t\t\t\tdocument.title = `${documentTitle} - ${streamURL}`; // Update document title\n\t\t\t\tplayerURL.searchParams.set(\"streamURL\", streamURLElement.value); // Add stream URL as a param to the player URL\n\t\t\t\twindow.history.pushState(null, null, \"?streamURL=\" + encodeURIComponent(streamURL)); // Add the streamURL to the window URL and log in history\n\t\t\t}\n\t\t\t// Else it is empty\n\t\t\telse {\n\t\t\t\tdocument.title = `${documentTitle}`; // Update document title\n\t\t\t\tplayerURL.searchParams.delete(\"streamURL\"); // Delete streamURL param from the player URL\n\t\t\t\twindow.history.pushState(null, null, \"/\"); // Remove the streamURL param and log in history\n\t\t\t}\n\t\t}\n\t\t// Else if it is part of \"https://\" make sure the streamURL param is not there\n\t\telse if (streamURLElement.value.toString().length < 9) {\n\t\t\tdocument.title = `${documentTitle}`; // Update document title\n\t\t\tplayerURL.searchParams.delete(\"streamURL\"); // Delete streamURL param from the player URL\n\t\t\twindow.history.pushState(null, null, \"/\"); // Remove the streamURL param and log in history\n\t\t}\n\t}\n\n\t// Function for initializing the player based on a new URL\n\tfunction initializePlayer() {\n\t\tplayerURL = new URL(document.location.href.toString()); // Grab current URL\n\t\tstreamURL = getURLParam(\"streamURL\"); // Get stream URL from player URL param\n\n\t\t// If there is a Twitch auth token saved from a previous session\n\t\tif (localStorage.getItem(\"rjp-twitchAuthToken\") !== null) {\n\t\t\ttwitchAuthToken = localStorage.getItem(\"rjp-twitchAuthToken\"); // Get twitchAuthToken\n\t\t}\n\n\t\t// If an auth token was included with the URL update the stored one\n\t\tif (getURLHashParam(\"access_token\") !== \"\") {\n\t\t\ttwitchAuthToken = getURLHashParam(\"access_token\"); // Get the access token\n\n\t\t\t// Store it for future requests\n\t\t\tlocalStorage.setItem(\"rjp-twitchAuthToken\", twitchAuthToken);\n\n\t\t\t// Clear hashes\n\t\t\twindow.history.pushState(null, null, window.location.pathname + window.location.search);\n\t\t}\n\n\t\t// If there is an error param from Twitch auth attempt\n\t\tif (getURLParam(\"error\") !== \"\") {\n\t\t\t// If it was because the user denied access\n\t\t\tif (getURLParam(\"error_description\") === \"The user denied you access\") {\n\t\t\t\t// Let them know\n\t\t\t\talert(\"To find a random stream or use the followed streams list, please authorize Twitch access.\");\n\n\t\t\t\t// If the afterAuthAction is \"random\"\n\t\t\t\tif (localStorage.getItem(\"rjp-afterAuthAction\") === \"random\") {\n\t\t\t\t\tlocalStorage.removeItem(\"rjp-afterAuthAction\"); // Remove that action\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Else it may be because of an expired token\n\t\t\telse {\n\t\t\t\t// Clear token\n\t\t\t\tlocalStorage.removeItem(\"rjp-twitchAuthToken\");\n\n\t\t\t\t// Send them to get an auth token\n\t\t\t\tredirectForTwitchAuthToken(\"stream\");\n\t\t\t}\n\t\t}\n\n\t\t// If there is an action saved which needs to be performed\n\t\tif (localStorage.getItem(\"rjp-afterAuthAction\") !== null) {\n\t\t\t// If the afterAuthAction is \"random\"\n\t\t\tif (localStorage.getItem(\"rjp-afterAuthAction\") === \"random\") {\n\t\t\t\tdocument.getElementById(\"randomStreamButton\").click(); // Click the random button again\n\t\t\t}\n\t\t\t// Assume it is a stream URL\n\t\t\telse {\n\t\t\t\tstreamURL = localStorage.getItem(\"rjp-afterAuthAction\"); // Set the streamURL to the saved afterAuthAction\n\t\t\t}\n\t\t\tlocalStorage.removeItem(\"rjp-afterAuthAction\"); // Remove that action\n\t\t}\n\n\t\t// If stream URL param of the player URL is not blank\n\t\tif (streamURL != \"\") {\n\t\t\tstreamURLElement.value = streamURL; // Set the stream URL input element to the stream URL\n\t\t\tdocument.title = `${documentTitle} - ${streamURL}`; // Update document title\n\t\t\tupdateStreamFrame(); // Show the stream\n\t\t\tpeekUI(); // Briefly show UI\n\t\t}\n\t\t// Else it is empty\n\t\telse {\n\t\t\tdocument.title = `${documentTitle}`; // Update document title\n\n\t\t\t// If this is a small screen\n\t\t\tif (window.innerWidth < 768) {\n\t\t\t\tsetUIState(\"open\"); // Open all UI\n\n\t\t\t\t// After 3000 seconds\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetMenuElementState(\"close\"); // Close menu\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t\t// Else is is large enough to open everything\n\t\t\telse {\n\t\t\t\tsetUIState(\"open\"); // Open all UI\n\t\t\t}\n\t\t}\n\t}\n\n\t// Show appropriate stream type\n\tfunction showStreamFrameElement(type) {\n\t\t// Hide unknown Stream Element\n\t\tfunction hideUnknownStream() {\n\t\t\tunknownStreamElement.classList.add(\"hidden\"); // Hide unknown stream element\n\t\t\tunknownStreamElement.src = \"\"; // Clear unknown stream element\n\t\t}\n\n\t\t// Hide how-to\n\t\tfunction hideHowTo() {\n\t\t\thowToElement.classList.add(\"hidden\"); // Hide how-to\n\t\t}\n\n\t\t// Hide Twitch Stream Element\n\t\tfunction hideTwitchStream() {\n\t\t\ttwitchStreamElement.classList.add(\"hidden\"); // Hide Twitch stream element\n\t\t\ttwitchStreamElement.innerHTML = \"\"; // Clear Twitch stream element\n\t\t\ttwitchChannelId = \"\"; // Clear Twitch channel id\n\t\t}\n\n\t\t// If type equals Twitch\n\t\tif (type == \"twitch\") {\n\t\t\t// Display Twitch stream element\n\t\t\ttwitchStreamElement.classList.remove(\"hidden\");\n\n\t\t\thideHowTo(); // Hide how-to\n\t\t\thideUnknownStream(); // Hide unknown stream\n\t\t}\n\t\t// If type equals how-to\n\t\telse if (type == \"howTo\") {\n\t\t\t// Display how-to element\n\t\t\thowToElement.classList.remove(\"hidden\");\n\n\t\t\t// Bring the stream frame into view\n\t\t\tstreamPaneElement.scrollIntoView(true);\n\n\t\t\thideUnknownStream(); // Hide unknown stream\n\t\t\thideTwitchStream(); // Hide twitch\n\t\t\tsetStreamURLBarElementState(\"open\"); // Show stream URL bar\n\t\t}\n\t\t// Else use unknown stream element\n\t\telse {\n\t\t\t// Display unknown stream element\n\t\t\tunknownStreamElement.classList.remove(\"hidden\");\n\n\t\t\thideHowTo(); // Hide how-to\n\t\t\thideTwitchStream(); // Hide Twitch stream\n\t\t}\n\t}\n\n\t// Function for clearing channel id/name variables\n\tfunction clearChannelIds() {\n\t\ttwitchChannelId = \"\"; // Clear Twitch channel Id\n\t\tunknownStreamElement.src = \"\"; // Clear unknown stream src\n\t}\n\n\t// Function for navigating stream frame\n\tfunction updateStreamFrame() {\n\t\t// If the stream URL field is not blank\n\t\tif (streamURLElement.value != \"\") {\n\t\t\t/////////////////////////////\n\t\t\t// Clean up URL formatting //\n\t\t\t/////////////////////////////\n\n\t\t\t// If the user has not typed part of \"https://\"\n\t\t\tif (!\"https://\".startsWith(streamURLElement.value.toString())) {\n\t\t\t\tstreamURLElement.value = streamURLElement.value.toString().replace(/http:\\/\\//g, \"\"); // Remove any \"http://\"\"'s\n\t\t\t\tstreamURLElement.value = streamURLElement.value.toString().replace(/https:\\/\\//g, \"\"); // Remove any \"https://\"\"'s\n\t\t\t\tstreamURLElement.value = `https://${streamURLElement.value.toString()}`; // Add secure protocol\n\t\t\t}\n\n\t\t\t/////////////////////////////\n\t\t\t//   Setup stream element  //\n\t\t\t/////////////////////////////\n\n\t\t\t// If the stream URL is this web app\n\t\t\tif (streamURLElement.value.toString().includes(\"remote-jackbox-player\")) {\n\t\t\t\t// Block inception...\n\t\t\t\t// Click the how-to button instead\n\t\t\t\tdocument.getElementById(\"howToButton\").click();\n\t\t\t}\n\t\t\t// Else if the stream URL is for Twitch\n\t\t\telse if (streamURLElement.value.toString().includes(\"twitch.tv\")) {\n\t\t\t\t// If Twitch channel id is blank or has changed\n\t\t\t\tif (twitchChannelId === \"\" || twitchChannelId !== streamURLElement.value.toString().split(\"/\")[3]) {\n\t\t\t\t\t// Update the Twitch channel id\n\t\t\t\t\ttwitchChannelId = streamURLElement.value.toString().split(\"/\")[3];\n\n\t\t\t\t\t// Show Twitch stream\n\t\t\t\t\tshowStreamFrameElement(\"twitch\");\n\n\t\t\t\t\t// TTV configuration\n\t\t\t\t\tlet ttvConfig = () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar embed = new Twitch.Embed(\"twitchStream\", {\n\t\t\t\t\t\t\t\tallowfullscreen: false,\n\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\theight: \"100%\",\n\t\t\t\t\t\t\t\tchannel: twitchChannelId,\n\t\t\t\t\t\t\t\ttheme: \"dark\",\n\t\t\t\t\t\t\t\tlayout: \"video-with-chat\",\n\t\t\t\t\t\t\t\tautoplay: true,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tembed.addEventListener(Twitch.Embed.VIDEO_READY, () => {\n\t\t\t\t\t\t\t\tvar player = embed.getPlayer();\n\t\t\t\t\t\t\t\tplayer.play();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(\"Twitch embed setup error: \\n%o\", error); // Log error\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the Twitch embed script has not previously been loaded\n\t\t\t\t\tif (document.getElementById(\"ttvEmbedScript\") == null || document.getElementById(\"ttvEmbedScript\") == undefined) {\n\t\t\t\t\t\t// Load and configure Twitch script\n\t\t\t\t\t\tlet ttvEmbedScript = document.createElement(\"script\");\n\t\t\t\t\t\tttvEmbedScript.setAttribute(\"id\", \"ttvEmbedScript\");\n\t\t\t\t\t\tttvEmbedScript.setAttribute(\"src\", \"https://embed.twitch.tv/embed/v1.js\");\n\t\t\t\t\t\tttvEmbedScript.addEventListener(\"load\", ttvConfig);\n\n\t\t\t\t\t\tdocument.body.appendChild(ttvEmbedScript); // Append Twitch script\n\t\t\t\t\t}\n\t\t\t\t\t// Else it has already loaded\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Clear any previous Twitch streams\n\t\t\t\t\t\ttwitchStreamElement.innerHTML = \"\";\n\n\t\t\t\t\t\t// Configure Twitch stream\n\t\t\t\t\t\tttvConfig();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Use unknown stream element\n\t\t\telse {\n\t\t\t\t// Show unknown stream element\n\t\t\t\tshowStreamFrameElement();\n\n\t\t\t\t// If the stream source has not changed do not waste time updating/reloading it\n\t\t\t\tif (unknownStreamElement.src !== streamURLElement.value) {\n\t\t\t\t\t// Update the iframe source\n\t\t\t\t\tunknownStreamElement.src = streamURLElement.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Else switch to how-to\n\t\telse {\n\t\t\t// Click the how-to button\n\t\t\tdocument.getElementById(\"howToButton\").click();\n\t\t}\n\t}\n\n\t// Function for updating the state of the stream URL bar\n\tfunction setStreamURLBarElementState(state) {\n\t\t// Else if the requested stream URL bar state is open\n\t\tif (state == \"open\") {\n\t\t\t// Increase opacity of stream URL bar\n\t\t\tsetOpacityStreamURLBar(\"1.0\");\n\n\t\t\t// Set active styling\n\t\t\tstreamURLBarElement.classList.add(\"w-full\");\n\t\t\tstreamURLBarElement.classList.remove(\"w-0\");\n\n\t\t\tsetTimeout(() => {\n\t\t\t\t// For each titleHelpText within #streamURLBarTitleHelpText\n\t\t\t\tdocument.querySelectorAll(\"#streamURLBarTitleHelpText > .titleHelpText\").forEach((e) => {\n\t\t\t\t\t// Show it\n\t\t\t\t\te.classList.add(\"opacity-100\");\n\t\t\t\t\te.classList.remove(\"opacity-0\");\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t}\n\t\t// Else if the requested stream URL bar state is close\n\t\telse if (state == \"close\") {\n\t\t\t// Blur stream URL input\n\t\t\tstreamURLElement.blur();\n\n\t\t\t// For each titleHelpText within #streamURLBarTitleHelpText\n\t\t\tdocument.querySelectorAll(\"#streamURLBarTitleHelpText > .titleHelpText\").forEach((e) => {\n\t\t\t\t// Hide it\n\t\t\t\te.classList.add(\"opacity-0\");\n\t\t\t\te.classList.remove(\"opacity-100\");\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\t// Set inactive styling\n\t\t\t\tstreamURLBarElement.classList.add(\"w-0\");\n\t\t\t\tstreamURLBarElement.classList.remove(\"w-full\");\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\t// Function for updating the state of the menu\n\tfunction setMenuElementState(state) {\n\t\tconst closedMenuIcon = `<i class=\"fas fa-times\" aria-hidden=\"true\"></i>`;\n\t\tconst menuIcon = `<i class=\"fas fa-bars\" aria-hidden=\"true\"></i>`;\n\n\t\t// If the request state is open\n\t\tif (state == \"open\") {\n\t\t\tmenuButtonElement.innerHTML = closedMenuIcon; // Change the icon to the close button\n\t\t\tmenuItemsElement.classList.remove(\"h-0\");\n\t\t\tmenuItemsElement.style.height = menuItemsElement.childElementCount * 2.5 + \"rem\"; // Expand the menu 2.5 rem per button\n\t\t\tmenuButtonElement.title = \"Close menu\"; // Set title\n\n\t\t\t// Set active styling\n\t\t\tmenuButtonElement.classList.remove(\"bg-white\");\n\t\t\tmenuButtonElement.classList.remove(\"rounded-r\");\n\t\t\tmenuButtonElement.classList.add(\"rounded-br\");\n\t\t\tmenuButtonElement.classList.add(\"bg-teal-300\");\n\t\t\tmenuButtonElement.classList.add(\"shadow-inner\");\n\n\t\t\tsetTimeout(() => {\n\t\t\t\t// For each titleHelpText for a menuItem\n\t\t\t\tdocument.querySelectorAll(\".menuItem > .titleHelpText\").forEach((e) => {\n\t\t\t\t\t// Show it\n\t\t\t\t\te.classList.add(\"opacity-100\");\n\t\t\t\t\te.classList.remove(\"opacity-0\");\n\t\t\t\t});\n\n\t\t\t\t// For each titleHelpText for a control\n\t\t\t\tdocument.querySelectorAll(\".control > .titleHelpText\").forEach((e) => {\n\t\t\t\t\t// Show it\n\t\t\t\t\te.classList.add(\"opacity-100\");\n\t\t\t\t\te.classList.remove(\"opacity-0\");\n\t\t\t\t});\n\t\t\t}, 500);\n\t\t}\n\t\t// Else if the request state is close\n\t\telse if (state == \"close\") {\n\t\t\t// For each titleHelpText for a menuItem\n\t\t\tdocument.querySelectorAll(\".menuItem > .titleHelpText\").forEach((e) => {\n\t\t\t\t// Hide it\n\t\t\t\te.classList.add(\"opacity-0\");\n\t\t\t\te.classList.remove(\"opacity-100\");\n\t\t\t});\n\n\t\t\t// For each titleHelpText for a control\n\t\t\tdocument.querySelectorAll(\".control > .titleHelpText\").forEach((e) => {\n\t\t\t\t// Hide it\n\t\t\t\te.classList.add(\"opacity-0\");\n\t\t\t\te.classList.remove(\"opacity-100\");\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tmenuButtonElement.innerHTML = menuIcon; // Change the icon to the menu button\n\t\t\t\tmenuItemsElement.classList.remove(\"h-0\");\n\t\t\t\tmenuItemsElement.style.height = \"0rem\"; // Close the menu\n\t\t\t\tmenuButtonElement.title = \"Open menu\"; // Set title\n\n\t\t\t\t// Set inactive styling\n\t\t\t\tmenuButtonElement.classList.remove(\"bg-teal-300\");\n\t\t\t\tmenuButtonElement.classList.remove(\"shadow-inner\");\n\t\t\t\tmenuButtonElement.classList.remove(\"rounded-br\");\n\t\t\t\tmenuButtonElement.classList.add(\"bg-white\");\n\t\t\t\tmenuButtonElement.classList.add(\"rounded-r\");\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\t// Function for setting the UI state\n\tfunction setUIState(state) {\n\t\tsetStreamURLBarElementState(state);\n\t\tsetMenuElementState(state);\n\t}\n\n\t// Function for peeking UI\n\tfunction peekUI() {\n\t\tsetUIState(\"open\"); // Open the UI\n\n\t\t// Hide UI\n\t\tpeekUITimeoutID = setTimeout(() => {\n\t\t\tsetUIState(\"close\"); // Close the UI\n\t\t}, 3000);\n\t}\n\n\t// Function for stopping peekUI()\n\tfunction stopPeekUI() {\n\t\t// If there is a value in the timeout ID\n\t\tif (peekUITimeoutID != undefined) {\n\t\t\tclearTimeout(peekUITimeoutID); // Clear peekUI timeout\n\t\t\tpeekUITimeoutID = undefined; // Set it to undefined\n\t\t}\n\t}\n\n\t// Function for setting opacity of stream URL bar\n\tfunction setOpacityStreamURLBar(amount) {\n\t\tstreamURLBarElement.style.opacity = amount; // Set opacity value\n\t}\n\n\t// Add event listener to the setup split view button\n\tdocument.getElementById(\"setupSplitViewButton\").addEventListener(\"click\", () => {\n\t\tsetView(\"split\"); // Setup split view\n\t});\n\n\t// Add event listeners to the swap view buttons\n\tswapViewButtonElements.forEach((e) => {\n\t\te.addEventListener(\"click\", () => {\n\t\t\t// If the active view is not already swap view (this should never happen if the UI controls are setup correctly)\n\t\t\tif (activeView != \"swap\") {\n\t\t\t\tsetView(\"swap\"); // Setup swap view\n\t\t\t}\n\t\t\tswapView(); // Swap view\n\t\t});\n\t});\n\n\t// Add event listener to the setup swap view setup button\n\tdocument.getElementById(\"setupSwapViewButton\").addEventListener(\"click\", () => {\n\t\t// If the active view is already swap view\n\t\tif (activeView == \"swap\") {\n\t\t\tswapView(); // Swap view\n\t\t}\n\t\t// Active view is already swap view\n\t\telse {\n\t\t\tsetView(\"swap\"); // Setup swap view\n\t\t}\n\t});\n\n\t// Add event listener to the setup scroll view button\n\tdocument.getElementById(\"setupScrollViewButton\").addEventListener(\"click\", () => {\n\t\tsetView(\"scroll\"); // Setup scroll view\n\t});\n\n\t// Add event listener to the setup swipe view button\n\tdocument.getElementById(\"setupSwipeViewButton\").addEventListener(\"click\", () => {\n\t\tsetView(\"swipe\"); // Setup swipe view\n\t});\n\n\t// Add event listener for when the URL input field receives input\n\tstreamURLElement.addEventListener(\"input\", () => {\n\t\tupdateStreamFrame(); // Update the stream frame\n\t\tupdatePlayer(); // Update the player URL based on user input\n\t\tsetOpacityStreamURLBar(\"1.0\"); // Increase opacity of stream URL bar\n\t});\n\n\t// Add event listener for when the URL input field receives focus\n\tstreamURLElement.addEventListener(\"focus\", () => {\n\t\tstopPeekUI(); // Stop menus from hiding after peekUI()\n\t\tupdateStreamFrame(); // Update the stream frame\n\t\tupdatePlayer(); // Update the player URL based on user input\n\t\tsetOpacityStreamURLBar(\"1.0\"); // Increase opacity of stream URL bar\n\t\tgenerateFollowedStreamsList(); // Update the followed streams list\n\n\t\t// Show followed streams wrapper\n\t\tdocument.getElementById(\"followedStreamsListWrapper\").classList.remove(\"scale-y-0\");\n\n\t\t// If the device is low res\n\t\tif (window.innerWidth < 768 || window.innerHeight < 768) {\n\t\t\t// Move menu to bottom of screen (helpful on mobile devices)\n\t\t\tdocument.getElementById(\"menu\").classList.remove(\"mb-24\");\n\t\t\tdocument.getElementById(\"menu\").classList.add(\"mb-6\");\n\t\t}\n\t});\n\n\t// Add event listener for when the URL input field blurs\n\tstreamURLElement.addEventListener(\"blur\", () => {\n\t\tupdateStreamFrame(); // Update the stream frame\n\t\tupdatePlayer(); // Update the player URL based on user input\n\n\t\t// Hide followed streams wrapper\n\t\tdocument.getElementById(\"followedStreamsListWrapper\").classList.add(\"scale-y-0\");\n\n\t\t// If the device is low res\n\t\tif (window.innerWidth < 768 || window.innerHeight < 768) {\n\t\t\t// Move menu back to original position\n\t\t\tdocument.getElementById(\"menu\").classList.remove(\"mb-6\");\n\t\t\tdocument.getElementById(\"menu\").classList.add(\"mb-24\");\n\t\t}\n\t});\n\n\t// Add event listener for when the stream URL form is submitted\n\tdocument.getElementById(\"streamURLForm\").addEventListener(\"submit\", function (e) {\n\t\tupdateStreamFrame(); // Update the stream frame\n\t\tupdatePlayer(); // Update the player URL based on user input\n\t\tsetUIState(\"close\"); // Hide UI\n\n\t\te.preventDefault(); // Prevent form submission\n\t});\n\n\t// Add event listener for when the viewport is resized\n\twindow.addEventListener(\"resize\", () => {});\n\n\t// Add event listener for when history is traversed in order to update the stream frame and URL input\n\twindow.addEventListener(\"popstate\", () => {\n\t\tinitializePlayer(); // Initialize the player based on the stream URL if present\n\t\tupdateStreamFrame(); // Update the stream frame\n\t});\n\n\t// Add event listener to the share button\n\tdocument.getElementById(\"shareButton\").addEventListener(\"click\", () => {\n\t\tstopPeekUI(); // Stop menus from hiding after peekUI()\n\n\t\t// Copy URL to clipboard\n\t\tcopyToClipboard(playerURL.toString().replace(playerURL.hash, \"\"));\n\n\t\t// Let the user know the link was copied to the clipboard\n\t\tdocument.getElementById(\"shareText\").classList.add(\"px-1\"); // Add padding on left and right\n\t\tdocument.getElementById(\"shareText\").classList.add(\"w-40\"); // Expand share text\n\t\tdocument.getElementById(\"shareButton\").classList.remove(\"rounded-r\"); // Remove rounding on right side of share button\n\t\tdocument.getElementById(\"shareTextDoppelganger\").classList.add(\"px-1\"); // Add padding on left and right of doppelganger\n\t\tdocument.getElementById(\"shareTextDoppelganger\").classList.add(\"w-40\"); // Expand doppelganger\n\t\tsetTimeout(() => {\n\t\t\tdocument.getElementById(\"shareText\").classList.remove(\"px-1\"); // Remove padding on left and right\n\t\t\tdocument.getElementById(\"shareText\").classList.remove(\"w-40\"); // Collapse share text\n\t\t\tdocument.getElementById(\"shareButton\").classList.add(\"rounded-r\"); // Add rounding on right side of share button\n\t\t\tdocument.getElementById(\"shareTextDoppelganger\").classList.remove(\"px-1\"); // Remove padding on left and right of doppelganger\n\t\t\tdocument.getElementById(\"shareTextDoppelganger\").classList.remove(\"w-40\"); // Collapse doppelganger\n\t\t\tsetUIState(\"close\"); // Hide UI\n\t\t}, 3000);\n\t});\n\n\t// Add event listener to the how-to button\n\tdocument.getElementById(\"howToButton\").addEventListener(\"click\", () => {\n\t\t// If the how-to is hidden\n\t\tif (Array.from(howToElement.classList).includes(\"hidden\")) {\n\t\t\tsetMenuElementState(\"close\"); // Hide the menu\n\t\t\tshowStreamFrameElement(\"howTo\"); // Show how-to element\n\t\t} else {\n\t\t\tupdateStreamFrame(); // Update the stream frame\n\t\t\tupdatePlayer(); // Update the player URL based on user input\n\t\t}\n\t});\n\n\t// Function for prompting unload confirmation dialog\n\tfunction confirmUnload(e) {\n\t\t// Prompt always shown in Mozilla Firefox\n\t\t// Prompt only show in Chrome if user interacted with the page\n\n\t\t// Cancel the default event\n\t\te.preventDefault();\n\n\t\t// Chrome requires returnValue to be set\n\t\te.returnValue = \"\";\n\t}\n\n\t// Add event listener for when the page is reloaded in order to confirm that session will be lost\n\twindow.addEventListener(\"beforeunload\", confirmUnload);\n\n\t// Add event listener to the stream reload button\n\tdocument.getElementById(\"reloadStreamButton\").addEventListener(\"click\", () => {\n\t\tclearChannelIds(); // Clear channel info so that stream pane will reload\n\t\tupdateStreamFrame(); // Update stream pane\n\t});\n\n\t// Add event listener to the game reload button\n\tdocument.getElementById(\"reloadGameButton\").addEventListener(\"click\", () => {\n\t\tlet result = false; // Result for user prompt\n\t\tresult = window.confirm(\"Reload the game?\\nYou may lose your spot in the lobby.\"); // Check if the user really wants to reload their game\n\n\t\t// If results are true\n\t\tif (result === true) {\n\t\t\t// Reload game frame\n\t\t\tgameFrameElement.src = \"\"; // Clear game src\n\t\t\tgameFrameElement.src = defaultGameURL; // Replace default game URL\n\t\t}\n\t});\n\n\t// Add event listener for menu button\n\tmenuButtonElement.addEventListener(\"click\", () => {\n\t\t// If the menu is closed\n\t\tif (menuButtonElement.title.includes(\"Open\")) {\n\t\t\tsetUIState(\"open\"); // Open UI\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tstreamURLElement.focus(); // Focus on stream URL input\n\t\t\t}, 1000); // After 1 sec\n\t\t}\n\t\t// Else if the menu is open\n\t\telse if (menuButtonElement.title.includes(\"Close\")) {\n\t\t\tsetUIState(\"close\"); // Close UI\n\t\t\tstreamURLElement.blur(); // Blur stream URL input\n\t\t}\n\t});\n\n\t// Add event listener for close button on stream URL bar\n\tdocument.getElementById(\"hideStreamURLBarButton\").addEventListener(\"click\", () => {\n\t\tsetStreamURLBarElementState(\"close\"); // Close stream URL bar\n\t});\n\n\t// Add event listener for button title text mouseover\n\tdocument.querySelectorAll(\".menuItem\").forEach((e) => {\n\t\te.addEventListener(\"mouseover\", () => {\n\t\t\tstopPeekUI(); // Stop menus from hiding after peekUI()\n\t\t});\n\t});\n\n\t// Add event listener for control button mouseover\n\tdocument.querySelectorAll(\".control\").forEach((e) => {\n\t\te.addEventListener(\"mouseover\", () => {\n\t\t\tstopPeekUI(); // Stop menus from hiding after peekUI()\n\t\t});\n\t});\n\n\t// Add event listener for stream URL bar mouseover\n\tstreamURLBarElement.addEventListener(\"mouseover\", () => {\n\t\tstopPeekUI(); // Stop menus from hiding after peekUI()\n\n\t\t// Increase opacity of stream URL bar\n\t\tsetOpacityStreamURLBar(\"1.0\");\n\t});\n\n\t// Add event listener for stream URL bar mouseover\n\tstreamURLBarElement.addEventListener(\"mouseout\", () => {\n\t\t// If stream URL input is not empty\n\t\tif (streamURLElement.value != \"\") {\n\t\t\tsetOpacityStreamURLBar(\"0.5\"); // Decrease opacity of stream URL bar\n\t\t}\n\t});\n\n\t// Function for getting Twitch game ids from file\n\tasync function getTwitchGameIds() {\n\t\tlet gameIdsFile = await fetch(\"feature-random-stream-game-ids.json\"); // Retrieve Twitch game ids json file\n\n\t\t// If the game ids json file was retrieved successfully\n\t\tif (gameIdsFile.ok) {\n\t\t\tgameIdsFileJSON = await gameIdsFile.json(); // Convert to a json object\n\t\t\ttwitchGameIds = Array.from(gameIdsFileJSON.twitch); // Convert to an array and save\n\t\t} else {\n\t\t\tconsole.error(\"HTTP-Error:\" + gameIdsFile.status); // Log error\n\t\t\talert(\"Hmm...couldn't retrieve game list. Please try again.\"); // Ask user to try again\n\n\t\t\t// Remove event listener for when the page is reloaded in order to stop the confirmUnload dialog\n\t\t\twindow.removeEventListener(\"beforeunload\", confirmUnload);\n\n\t\t\tlocation.reload(); // Reload page\n\t\t}\n\t}\n\n\t// Function for redirecting user to get a new Twitch auth toke\n\t// Accepts an action string to perform when it receives a response from Twitch\n\tfunction redirectForTwitchAuthToken(action) {\n\t\t// If the action is \"random\"\n\t\tif (action === \"random\") {\n\t\t\tlocalStorage.setItem(\"rjp-afterAuthAction\", \"random\"); // Set afterAuthAction to \"random\"\n\t\t}\n\t\t// Else if it is stream\n\t\telse if (action === \"stream\") {\n\t\t\tlocalStorage.setItem(\"rjp-afterAuthAction\", streamURL); // Set afterAuthAction to the current stream URL\n\t\t} // Otherwise ignore action value\n\n\t\t// Remove event listener for when the page is reloaded in order to stop the confirmUnload dialog\n\t\twindow.removeEventListener(\"beforeunload\", confirmUnload);\n\n\t\t// Send the user to get an auth token\n\t\tdocument.location.href = `https://id.twitch.tv/oauth2/authorize?client_id=${twitchClientID}&redirect_uri=${window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\" ? \"http://localhost:5500/\" : window.location.origin + window.location.pathname}&response_type=token`;\n\t}\n\n\t// Add event listener for random stream button\n\tdocument.getElementById(\"randomStreamButton\").addEventListener(\"click\", async () => {\n\t\t// Function for getting a random integer\n\t\tfunction getRandomInt(min, max) {\n\t\t\tmin = Math.ceil(min);\n\t\t\tmax = Math.floor(max);\n\t\t\treturn Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n\t\t}\n\n\t\tstreamURLElement.disabled = true; // Disable the stream URL input\n\t\tstreamURLElement.value = \"Searching...\"; // Indicate to the user that searching is in progress\n\n\t\t// If the twitchGameIds have not yet been retrieved\n\t\tif (twitchGameIds === undefined) {\n\t\t\tawait getTwitchGameIds(); // Get the Twitch game ids from file\n\t\t}\n\n\t\t// If there is a twitchAuthToken already set and twitchGameIds is not undefined\n\t\tif (twitchAuthToken !== \"\" && twitchGameIds !== undefined) {\n\t\t\tlet streamPool = []; // Array of possible streams to choose from\n\t\t\tlet currentGameIDPool = []; // Array of streams gathered` thus far for a given game id\n\t\t\tlet twitchCursor = \"\"; // Variable for holding the results cursor\n\n\t\t\t// Retrieve top 30 streams (based on view count) using a game id\n\t\t\tfor (let i = 0; i < twitchGameIds.length; ) {\n\t\t\t\t// For this game id fetch top 30 streams\n\t\t\t\tlet twitchResult = await fetch(`https://api.twitch.tv/helix/streams?language=en&first=30&game_id=${twitchGameIds[i].game_id}&after=${twitchCursor}`, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Client-ID\": twitchClientID,\n\t\t\t\t\t\tAuthorization: `Bearer ${twitchAuthToken}`,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t// If retrieval was successful\n\t\t\t\tif (twitchResult.ok) {\n\t\t\t\t\tlet resultJSON = await twitchResult.json(); // Get results as a json object\n\n\t\t\t\t\t// For each stream\n\t\t\t\t\tfor (let j = 0; j < resultJSON.data.length; j++) {\n\t\t\t\t\t\t// If there are less than 8 viewers\n\t\t\t\t\t\tif (resultJSON.data[j].viewer_count < 8) {\n\t\t\t\t\t\t\tcurrentGameIDPool.push(resultJSON.data[j]); // Add it to current game id pool\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If there are less than 30 results and more results exist\n\t\t\t\t\tif (currentGameIDPool.length < 30 && resultJSON.pagination.cursor != undefined) {\n\t\t\t\t\t\ttwitchCursor = resultJSON.pagination.cursor; // Save last pagination location\n\t\t\t\t\t}\n\t\t\t\t\t// Else pagination is blank (no more results left) or we have enough results already\n\t\t\t\t\telse {\n\t\t\t\t\t\ttwitchCursor = \"\"; // Empty the cursor\n\t\t\t\t\t\tcurrentGameIDPool.forEach((s) => streamPool.push(s)); // Add the current game id pool to the total stream pool\n\t\t\t\t\t\tcurrentGameIDPool = []; // Clear current game id pool\n\t\t\t\t\t\ti++; // Move to the next game id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Else retrieval failed for some reason\n\t\t\t\telse {\n\t\t\t\t\tconsole.error(\"HTTP-Error:\" + twitchResult.status); // Log error\n\t\t\t\t\t// If the client was denied access\n\t\t\t\t\tif (twitchResult.status === 401) {\n\t\t\t\t\t\t// End execution and send user to get a Twitch auth token\n\t\t\t\t\t\treturn redirectForTwitchAuthToken(\"random\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Choose a random stream\n\t\t\tlet randomStreamIndex = getRandomInt(0, streamPool.length); // Get a random stream\n\t\t\tstreamURLElement.value = `https://twitch.tv/${streamPool[randomStreamIndex].user_name}`; // Set the stream URL input\n\t\t\tstreamURLElement.disabled = false; // Enable the stream URL input\n\n\t\t\tupdateStreamFrame(); // Update the stream frame\n\t\t\tupdatePlayer(); // Update the player URL based on user input\n\t\t}\n\t\t// Else if there is no auth token hash\n\t\telse if (twitchAuthToken === \"\") {\n\t\t\tredirectForTwitchAuthToken(\"random\"); // Go get a Twitch auth token\n\t\t}\n\t});\n\n\t// Function for generating a list of the user's followed streams playing Jackbox games\n\tasync function generateFollowedStreamsList() {\n\t\tlet followedStreamsListElement = document.getElementById(\"followedStreamsList\");\n\t\tlet followedStreamsListStatusElement = document.getElementById(\"followedStreamsListStatus\");\n\n\t\t// If the twitchGameIds have not yet been retrieved\n\t\tif (twitchGameIds === undefined) {\n\t\t\tawait getTwitchGameIds(); // Get the Twitch game ids from file\n\t\t}\n\n\t\t// If there is a twitchAuthToken already set and twitchGameIds is not undefined\n\t\tif (twitchAuthToken !== \"\" && twitchGameIds !== undefined) {\n\t\t\t// Show the streams list status element\n\t\t\tfollowedStreamsListStatusElement.classList.remove(\"hidden\");\n\n\t\t\t// If no streams have been generated yet\n\t\t\tif (followedStreamsListElement.innerHTML === \"\") {\n\t\t\t\t// Let the user know a list is being generated\n\t\t\t\tfollowedStreamsListStatusElement.innerHTML = `Generating list...`;\n\t\t\t}\n\t\t\t// Let the user know the list is updating\n\t\t\telse {\n\t\t\t\t// Let the user know a list is being generated\n\t\t\t\tfollowedStreamsListStatusElement.innerHTML = `Updating list...`;\n\t\t\t}\n\n\t\t\t// Fetch user object\n\t\t\tlet usersResult = await fetch(`https://api.twitch.tv/helix/users`, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"Client-ID\": twitchClientID,\n\t\t\t\t\tAuthorization: `Bearer ${twitchAuthToken}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t// The user object was successfully fetched\n\t\t\tif (usersResult.ok) {\n\t\t\t\tlet userObject = await usersResult.json(); // Get user id\n\n\t\t\t\tlet followedStreamsPlayingJG = []; // Array of followed streams which are playing Jackbox games\n\t\t\t\tlet twitchCursor = \"\"; // Variable for holding the results cursor\n\n\t\t\t\t// Iterate through each page of query results\n\t\t\t\tdo {\n\t\t\t\t\t//Followed streams in the current query\n\t\t\t\t\tlet currentPageOfFollowedStreams = await fetch(`https://api.twitch.tv/helix/users/follows?from_id=${userObject.data[0].id}&first=30&after=${twitchCursor}`, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Client-ID\": twitchClientID,\n\t\t\t\t\t\t\tAuthorization: `Bearer ${twitchAuthToken}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tlet currentPageOfFollowedStreamsJSON = await currentPageOfFollowedStreams.json(); // Convert query result to json object\n\t\t\t\t\tlet userIdParamString = \"\"; // Variable user ids parameters\n\n\t\t\t\t\t// If the user is following at least one stream\n\t\t\t\t\tif (currentPageOfFollowedStreamsJSON.data.length > 0) {\n\t\t\t\t\t\t// Add each user from the current page to the userIdParamString\n\t\t\t\t\t\tfor (let u = 0; u < currentPageOfFollowedStreamsJSON.data.length; u++) {\n\t\t\t\t\t\t\tuserIdParamString += \"user_id=\";\n\t\t\t\t\t\t\tuserIdParamString += currentPageOfFollowedStreamsJSON.data[u].to_id;\n\n\t\t\t\t\t\t\t// If this is not the last param append an \"&\" after\n\t\t\t\t\t\t\tif (u + 1 < currentPageOfFollowedStreamsJSON.data.length) {\n\t\t\t\t\t\t\t\tuserIdParamString += \"&\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Fetch stream status info of the current page\n\t\t\t\t\t\tlet streamInfo = await fetch(`https://api.twitch.tv/helix/streams?${userIdParamString}`, {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Client-ID\": twitchClientID,\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${twitchAuthToken}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tuserIdParamString = \"\"; // Clear param string\n\n\t\t\t\t\t\t// Add each user from the current page to the userIdParamString\n\t\t\t\t\t\tfor (let u = 0; u < currentPageOfFollowedStreamsJSON.data.length; u++) {\n\t\t\t\t\t\t\tuserIdParamString += \"id=\";\n\t\t\t\t\t\t\tuserIdParamString += currentPageOfFollowedStreamsJSON.data[u].to_id;\n\n\t\t\t\t\t\t\t// If this is not the last param append an \"&\" after\n\t\t\t\t\t\t\tif (u + 1 < currentPageOfFollowedStreamsJSON.data.length) {\n\t\t\t\t\t\t\t\tuserIdParamString += \"&\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Fetch user info of the current page\n\t\t\t\t\t\tlet userInfo = await fetch(`https://api.twitch.tv/helix/users?${userIdParamString}`, {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\"Client-ID\": twitchClientID,\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${twitchAuthToken}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// If fetch successfully got stream status and user info for the current page\n\t\t\t\t\t\tif (streamInfo.ok && userInfo.ok) {\n\t\t\t\t\t\t\tlet streamInfoJSON = await streamInfo.json(); // Convert query result to json object\n\t\t\t\t\t\t\tlet userInfoJSON = await userInfo.json(); // Convert query result to json object\n\n\t\t\t\t\t\t\t// Iterate through each stream result\n\t\t\t\t\t\t\tfor (let s = 0; s < streamInfoJSON.data.length; s++) {\n\t\t\t\t\t\t\t\t// Iterate through each game id\n\t\t\t\t\t\t\t\tfor (let g = 0; g < twitchGameIds.length; g++) {\n\t\t\t\t\t\t\t\t\t// If the stream is playing a game matching one from the list of game ids\n\t\t\t\t\t\t\t\t\tif (twitchGameIds[g].game_id === streamInfoJSON.data[s].game_id) {\n\t\t\t\t\t\t\t\t\t\tlet tempObject = streamInfoJSON.data[s]; // Copy current stream to a temp object\n\n\t\t\t\t\t\t\t\t\t\t// Iterate through all the user info to find the matching profile image\n\t\t\t\t\t\t\t\t\t\tfor (let p = 0; p < userInfoJSON.data.length; p++) {\n\t\t\t\t\t\t\t\t\t\t\t// If the user info id matches the stream info user id\n\t\t\t\t\t\t\t\t\t\t\tif (userInfoJSON.data[p].id === streamInfoJSON.data[s].user_id) tempObject.profile_image_url = userInfoJSON.data[p].profile_image_url; // Copy profile image from user info\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tfollowedStreamsPlayingJG.push(tempObject); // Push the stream object\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If there are more query pages\n\t\t\t\t\tif (currentPageOfFollowedStreamsJSON.pagination.cursor !== undefined) {\n\t\t\t\t\t\ttwitchCursor = currentPageOfFollowedStreamsJSON.pagination.cursor; // Save the cursor\n\t\t\t\t\t}\n\t\t\t\t\t// Else there are no more query pages\n\t\t\t\t\telse {\n\t\t\t\t\t\ttwitchCursor = \"\"; // Empty the cursor\n\t\t\t\t\t}\n\t\t\t\t} while (twitchCursor !== \"\");\n\n\t\t\t\t// If at least one stream is playing a valid game id\n\t\t\t\tif (followedStreamsPlayingJG.length > 0) {\n\t\t\t\t\t// If more than one stream\n\t\t\t\t\tif (followedStreamsPlayingJG.length > 1) {\n\t\t\t\t\t\t// sort based on view count\n\t\t\t\t\t}\n\n\t\t\t\t\tfollowedStreamsListElement.innerHTML = \"\"; // Clear followedStreamsList\n\n\t\t\t\t\t// For each stream add it to the dropdown list\n\t\t\t\t\tfollowedStreamsPlayingJG.forEach((s) => {\n\t\t\t\t\t\tlet gameName = \"\"; // Variable for holding game name\n\n\t\t\t\t\t\t// Iterate through game ids\n\t\t\t\t\t\tfor (let g = 0; g < twitchGameIds.length; g++) {\n\t\t\t\t\t\t\t// If the game id matches the stream's game id\n\t\t\t\t\t\t\tif (twitchGameIds[g].game_id === s.game_id) {\n\t\t\t\t\t\t\t\tgameName = twitchGameIds[g].game_name; // Grab the game name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create a stream list component\n\t\t\t\t\t\tfollowedStreamsListElement.innerHTML += `\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"followedStream flex flex-row flex-no-wrap p-2 text-center align-middle cursor-pointer border-b border-solid border-gray-400 hover:bg-teal-100\" \n\t\t\t\t\t\t\t\ttitle=\"${s.user_name + \" playing \" + gameName + \" for \" + (s.viewer_count === 1 ? s.viewer_count + \" viewer\" : s.viewer_count === 0 ? \"no one.\" : s.viewer_count.toLocaleString() + \" viewers.\")}\" \n\t\t\t\t\t\t\t\tdata-stream-name=\"${s.user_name}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex-initial w-4/12 text-left truncate\">\n\t\t\t\t\t\t\t\t\t<img src=\"${s.profile_image_url}\" class=\"inline w-6 rounded\">\n\t\t\t\t\t\t\t\t\t<span class=\"font-bold\">${s.user_name}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"flex-grow text-left truncate\">\n\t\t\t\t\t\t\t\t\t<span class=\"underline\">${gameName}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"flex-initial w-3/12 text-right\">\n\t\t\t\t\t\t\t\t\t${s.viewer_count === 1 ? s.viewer_count + \" viewer\" : s.viewer_count === 0 ? \"No viewers\" : s.viewer_count.toLocaleString() + \" viewers\"}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\t\t\t\t});\n\n\t\t\t\t\t// Add event listener to each stream component\n\t\t\t\t\tdocument.querySelectorAll(\".followedStream\").forEach((e) => {\n\t\t\t\t\t\te.addEventListener(\"click\", () => {\n\t\t\t\t\t\t\tstreamURLElement.value = `https://twitch.tv/${e.getAttribute(\"data-stream-name\")}`; // Set the stream URL input\n\t\t\t\t\t\t\tupdateStreamFrame(); // Update the stream frame\n\t\t\t\t\t\t\tupdatePlayer(); // Update the player URL based on user input\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// No followed streams are playing a valid game id\n\t\t\t\telse {\n\t\t\t\t\t// Let the user know\n\t\t\t\t\tfollowedStreamsListElement.innerHTML = `\n\t\t\t\t\t\t<div class=\"p-2 text-center\">\n\t\t\t\t\t\t\tSorry, none of your followed streams are playing a Jackbox game.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Failed to fetch the user object from Twitch (probably the user revoked access)\n\t\t\telse {\n\t\t\t\t// Set followedStreamsList innerHTML to a notice\n\t\t\t\tfollowedStreamsListElement.innerHTML = `\n\t\t\t\t\t<div class=\"p-2 text-center\">\n\t\t\t\t\t\tWant to see which of your followed Twitch streams are playing Jackbox\n\t\t\t\t\t\tgames?<br />\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"authorizeTwitchAccessButton\"\n\t\t\t\t\t\t\tclass=\"bg-purple-500 text-white rounded mt-1 px-4 py-1 hover:bg-purple-600\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAuthorize <i class=\"fab fa-twitch\"></i> access\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\t// Hide the streams list status element\n\t\t\tfollowedStreamsListStatusElement.classList.add(\"hidden\");\n\t\t}\n\t\t// Else let the user know\n\t\telse {\n\t\t\t// Set followedStreamsList innerHTML to a notice\n\t\t\tfollowedStreamsListElement.innerHTML = `\n\t\t\t\t<div class=\"p-2 text-center\">\n\t\t\t\t\tWant to see which of your followed Twitch streams are playing Jackbox\n\t\t\t\t\tgames?<br />\n\t\t\t\t\t<button\n\t\t\t\t\t\tid=\"authorizeTwitchAccessButton\"\n\t\t\t\t\t\tclass=\"bg-purple-500 text-white rounded mt-1 px-4 py-1 hover:bg-purple-600\"\n\t\t\t\t\t>\n\t\t\t\t\t\tAuthorize <i class=\"fab fa-twitch\"></i> access\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\t// Add event listener for authorizeTwitchAccessButton\n\t\t\tdocument.getElementById(\"authorizeTwitchAccessButton\").addEventListener(\"click\", () => {\n\t\t\t\tredirectForTwitchAuthToken(\"stream\"); // Send the user to get a Twitch auth token\n\t\t\t});\n\t\t}\n\t}\n\n\t// Add event listener for showStreamURLBarButton\n\tdocument.getElementById(\"showStreamURLBarButton\").addEventListener(\"click\", () => {\n\t\t// If the streamURLBar is already open\n\t\tif (streamURLBarElement.classList.toString().includes(\"w-full\")) {\n\t\t\tstreamURLElement.focus(); // Focus on stream URL input\n\t\t}\n\t\t// Else the streamURLBar is closed\n\t\telse {\n\t\t\tsetStreamURLBarElementState(\"open\"); // Show stream URL bar\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tstreamURLElement.focus(); // Focus on stream URL input\n\t\t\t}, 1000); // After 1 sec\n\t\t}\n\t});\n\n\t// Function for retrieving web app client ids\n\tasync function retrieveClientIds() {\n\t\tlet retrieveClientIds = await fetch(\"client-ids.json\"); // Get contents of json file\n\n\t\t// If the json file was retrieved successfully\n\t\tif (retrieveClientIds.ok) {\n\t\t\tlet retrieveClientIdsJSON = await retrieveClientIds.json(); // Convert to json object\n\t\t\ttwitchClientID = retrieveClientIdsJSON[\"twitch-client-id\"]; // Extract the Twitch id\n\t\t} else {\n\t\t\tconsole.error(\"Unable to get client ids. The application will not operate as intended. Please reload the page to try again.\");\n\t\t}\n\t}\n\n\t// If there is an active view saved from a previous session\n\tif (localStorage.getItem(\"rjp-activeView\") !== null) {\n\t\tsetView(localStorage.getItem(\"rjp-activeView\")); // Get and set view back to what it was\n\t} else {\n\t\tlocalStorage.setItem(\"rjp-activeView\", activeView); // Save the default view as the active view\n\t}\n\tretrieveClientIds(); // Get client ids\n\tinitializePlayer(); // Update the player based on the stream URL if present\n});\n"],"mappings":"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"}